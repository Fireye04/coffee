
{{ define "main" }}

        <h1>
            <center><u>My Music!</u></center>
        </h1>

        <h2>
            <center><a href="/index.html">Home Sweet Home</a></center>
        </h2>

        <!-- <p>
            <a href="./Newsletter.html">Join my Newsletter</a> to get updated when a new post comes out!
        </p> -->
  <div>

  <p>This feed supports RSS! Find it <a href="/music/index.xml" target="_blank">here!</a>, and if you don't know what that is, you should learn! (or <a href="/newsletter">join my newsletter</a> instead)</p>

    {{ .Content }}

    
	<h2>Tracks by date!</h2>
        <hr />
    {{$songs := dict }}
	{{ range resources.Match "tracks/*" }}

        {{ $f := split .Name "/"}}
        {{$indexx := cond hugo.IsProduction 1 2}}
        {{$f = index $f indexx}}
        {{ $n := split $f "."}}
        {{$o := split (index $n 0) ":"}}
        {{ $songs = merge $songs (dict "songs" (dict (index $o 0) (dict "name" (index $o 0) "link" .RelPermalink "time" (index $o 1))))}}
    {{end}}


   {{ range sort $songs.songs "time" "desc"}}
   <p>{{.name}} <small>(Released {{.time}})</small> </p>
	<audio controls>
		<source src="{{ .link }}" type="audio/ogg">
	Your browser does not support the audio element.
	</audio>
    {{end}}

        <hr />
    {{ $pages := where site.RegularPages "Type" "music" }}
    {{ $paginator := .Paginate $pages }}

    {{ range $paginator.Pages }}
        <div class="indent">
      <h3><a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a></h3>
            <p class="indent"><strong>Description:</strong> {{ .Page.Description }}</p>
            <p class="indent"><strong>Word Count:</strong> {{ .Page.WordCount }}</p>
            <p class="indent"><strong>Date:</strong> {{time.Format "Jan 02, 2006" .Page.Date }}</p>
        </div>
        <hr />
    {{ end }}

{{ template "_internal/pagination.html" . }}

        <h2>
            <center><a href="/index.html">Home Sweet Home</a><br><small><small>(But at the bottom of the page this
                        time)</small></small></center>
        </h2>
    </div>
  <script src="/Scripts/music.js" crossorigin="anonymous"></script>
{{ end }}

